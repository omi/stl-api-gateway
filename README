stl-api-gateway
===============

Implementation of OMI API for the Sawtooth Lake OMI Transaction Family.

Youâ€™ll need these dependencies.
---------------

apt-get install -y -q \
    autoconf \
    automake \
    build-essential \
    connect-proxy \
    dh-make \
    equivs \
    g++ \
    git \
    libffi-dev \
    libgmp-dev \
    libssl-dev \
    libtool \
    make \
    pkg-config \
    python-all-dev \
    python3-all-dev \
    rsync \
    sudo \
    wget \
    unzip \
    zip

apt-get install -y -q \
    python-setuptools \
    python3-appdirs \
    python3-cbor \
    python3-cffi \
    python3-cffi \
    python3-colorlog \
    python3-flake8 \
    python3-hypothesis \
    python3-idna \
    python3-iso8601 \
    python3-lmdb \
    python3-pip \
    python3-pkgconfig \
    python3-pretend \
    python3-pyasn1 \
    python3-pyasn1-modules \
    python3-pycparser \
    python3-pytest \
    python3-setuptools \
    python3-stdeb \
    python3-toml \
    python3-yaml \
    python3-zmq



Getting Started
---------------

Use the STL_REST_URL environment variable to point the application to the
Sawtooth Lake REST API::

  STL_REST_URL="http://192.168.100.100:8080"

The OMI Transaction Family can be setup using the instruction in the
omi-summer-lab repository.

Setup
~~~~~

 $ ./setup_venv.sh

Run
~~~

 $ source venv3/bin/activate
 $ ./manage.py runserver


Sample Data
-----------

To get some sample data into Sawtooth Lake you can modify the tests in the
omi-summer-lab repository: omi/tests/test_omi_smoke.py

Change the URL to match your endpoint and run the test class with::

    TestOMISmoke().test_omi_smoke()


Known Issues
------------

The OMI Transaction Family and OMI API are not completely in sync.
Some fields have been moved to the "ext" object in the responses.

Also when writing to the API the Transaction Family requirements must
be satisfied which is not always strictly compatible with the OMI API Specs.
